/* Reset & Base Styles */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

:root {
    --primary: #667eea;
    --secondary: #764ba2;
    --accent: #f093fb;
    --success: #4ade80;
    --error: #ef4444;
    --bg-dark: #0a0e27;
    --bg-card: rgba(255, 255, 255, 0.05);
    --text-light: #ffffff;
    --text-muted: rgba(255, 255, 255, 0.7);
    --glow: rgba(102, 126, 234, 0.5);
}

body {
    font-family: -apple-system, BlinkMacSystemFont, 'Inter', 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
    background: var(--bg-dark);
    color: var(--text-light);
    overflow-x: hidden;
    min-height: 100vh;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

/* 3D Animated Background */
#vanta-bg {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -1;
}

/* Magical Star Particles */
.stars {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 0;
}

.stars::before,
.stars::after {
    content: '';
    position: absolute;
    width: 2px;
    height: 2px;
    background: white;
    box-shadow: 
        100px 200px white, 300px 100px white, 150px 450px white,
        500px 300px white, 250px 150px white, 450px 250px white,
        700px 400px white, 200px 600px white, 600px 100px white,
        800px 500px white, 400px 350px white, 550px 450px white;
    animation: twinkle 3s infinite alternate;
}

.stars::after {
    width: 1px;
    height: 1px;
    animation-delay: 1.5s;
}

@keyframes twinkle {
    0%, 100% { opacity: 0.3; }
    50% { opacity: 1; }
}

/* Container */
.container {
    position: relative;
    max-width: 1200px;
    margin: 0 auto;
    padding: 2rem;
    z-index: 1;
}

/* Header with 3D Title */
.header {
    text-align: center;
    margin-bottom: 3rem;
    animation: fadeInDown 1s ease-out;
}

.logo-container {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 1rem;
}

.magic-wand {
    font-size: 3rem;
    animation: float 3s ease-in-out infinite;
}

@keyframes float {
    0%, 100% { transform: translateY(0) rotate(0deg); }
    50% { transform: translateY(-20px) rotate(10deg); }
}

.title-3d {
    font-size: clamp(3rem, 8vw, 6rem);
    font-weight: 900;
    letter-spacing: 0.05em;
    margin: 0;
    display: flex;
    justify-content: center;
}

.title-3d .letter {
    display: inline-block;
    animation: wave 2s ease-in-out infinite;
    text-shadow: 
        0 0 10px var(--glow),
        0 0 20px var(--glow),
        0 0 30px var(--glow),
        2px 2px 0 var(--secondary),
        4px 4px 0 var(--accent);
    background: linear-gradient(45deg, var(--primary), var(--accent));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.title-3d .letter.glow {
    animation: pulse 2s ease-in-out infinite;
}

.title-3d .letter:nth-child(1) { animation-delay: 0s; }
.title-3d .letter:nth-child(2) { animation-delay: 0.1s; }
.title-3d .letter:nth-child(3) { animation-delay: 0.2s; }
.title-3d .letter:nth-child(4) { animation-delay: 0.3s; }
.title-3d .letter:nth-child(5) { animation-delay: 0.4s; }
.title-3d .letter:nth-child(6) { animation-delay: 0.5s; }
.title-3d .letter:nth-child(7) { animation-delay: 0.6s; }
.title-3d .letter:nth-child(8) { animation-delay: 0.7s; }

@keyframes wave {
    0%, 100% { transform: translateY(0) rotateY(0); }
    50% { transform: translateY(-15px) rotateY(10deg); }
}

@keyframes pulse {
    0%, 100% { 
        text-shadow: 
            0 0 8px var(--glow),
            0 0 16px var(--glow),
            0 0 24px var(--glow);
    }
    50% { 
        text-shadow: 
            0 0 12px var(--glow),
            0 0 24px var(--glow),
            0 0 36px var(--glow);
    }
}

.subtitle {
    font-size: 1.25rem;
    color: var(--text-muted);
    margin-top: 1rem;
    animation: fadeIn 1.5s ease-out;
}

/* Glass Effect Cards */
.glass-effect {
    background: var(--bg-card);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 30px;
    padding: 4rem;
    position: relative;
    overflow: hidden;
    animation: fadeInUp 1s ease-out;
    box-shadow: 
        0 8px 32px rgba(0, 0, 0, 0.3),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
    transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

.glass-effect:hover {
    transform: translateY(-5px);
    box-shadow: 
        0 12px 48px rgba(102, 126, 234, 0.3),
        inset 0 1px 0 rgba(255, 255, 255, 0.2);
}

.card-glow {
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, var(--glow) 0%, transparent 70%);
    opacity: 0.1;
    animation: rotate 20s linear infinite;
}

@keyframes rotate {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

/* Form Styles */
.story-form {
    display: flex;
    flex-direction: column;
    gap: 2rem;
}

.form-group {
    position: relative;
}

.floating-label {
    position: relative;
}

.floating-label input {
    width: 100%;
    padding: 1.25rem 1rem 0.75rem;
    font-size: 1rem;
    color: var(--text-light);
    background: rgba(255, 255, 255, 0.05);
    border: 2px solid rgba(255, 255, 255, 0.1);
    border-radius: 15px;
    outline: none;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

.floating-label select {
    width: 100%;
    padding: 1.25rem 1rem 0.75rem;
    font-size: 1rem;
    color: var(--text-light);
    background: rgba(255, 255, 255, 0.05);
    border: 2px solid rgba(255, 255, 255, 0.1);
    border-radius: 15px;
    outline: none;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    appearance: none;
    background-image: linear-gradient(45deg, transparent 50%, var(--accent) 50%),
        linear-gradient(135deg, var(--accent) 50%, transparent 50%),
        linear-gradient(to right, rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0.05));
    background-position: calc(100% - 25px) calc(50% - 3px), calc(100% - 20px) calc(50% - 3px), 100% 0;
    background-size: 10px 10px, 10px 10px, 2.5rem 100%;
    background-repeat: no-repeat;
}

.floating-label input:focus,
.floating-label input:not(:placeholder-shown) {
    border-color: var(--primary);
    background: rgba(255, 255, 255, 0.08);
}

.floating-label select:focus {
    border-color: var(--primary);
    background: rgba(255, 255, 255, 0.08);
}

.floating-label label {
    position: absolute;
    left: 1rem;
    top: 50%;
    transform: translateY(-50%);
    font-size: 1rem;
    color: var(--text-muted);
    pointer-events: none;
    transition: all 0.3s ease;
}

.floating-label input:focus + label,
.floating-label input:not(:placeholder-shown) + label {
    top: 0.75rem;
    font-size: 0.75rem;
    color: var(--primary);
}

.floating-label select + label {
    top: 0.7rem;
    font-size: 0.75rem;
    color: var(--primary);
}

.input-glow {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 0;
    height: 2px;
    background: linear-gradient(90deg, var(--primary), var(--accent));
    transition: width 0.3s ease;
}

.floating-label input:focus ~ .input-glow {
    width: 100%;
}

.floating-label select:focus ~ .input-glow {
    width: 100%;
}

/* Controls Section */
.controls-section {
    margin: 2rem 0;
    padding: 2rem;
    background: rgba(255, 255, 255, 0.03);
    border-radius: 20px;
    border: 1px solid rgba(255, 255, 255, 0.05);
}

.section-title {
    font-size: 1.25rem;
    margin-bottom: 1.5rem;
    color: var(--accent);
}

.toggle-group {
    display: grid;
    gap: 1rem;
}

.toggle-switch {
    display: flex;
    align-items: center;
    gap: 1rem;
    cursor: pointer;
    padding: 1rem;
    border-radius: 12px;
    transition: background 0.3s ease;
}

.toggle-switch:hover {
    background: rgba(255, 255, 255, 0.05);
}

.toggle-switch input {
    display: none;
}

.slider {
    position: relative;
    width: 50px;
    height: 26px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 50px;
    transition: all 0.3s ease;
}

.slider::before {
    content: '';
    position: absolute;
    top: 3px;
    left: 3px;
    width: 20px;
    height: 20px;
    background: white;
    border-radius: 50%;
    transition: all 0.3s ease;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
}

.toggle-switch input:checked + .slider {
    background: linear-gradient(90deg, var(--primary), var(--accent));
}

.toggle-switch input:checked + .slider::before {
    transform: translateX(24px);
}

.toggle-label {
    flex: 1;
    font-size: 1rem;
    color: var(--text-light);
}

/* Generate Button */
.generate-btn {
    position: relative;
    width: 100%;
    padding: 1.5rem;
    font-size: 1.25rem;
    font-weight: 700;
    color: white;
    background: linear-gradient(135deg, var(--primary), var(--secondary));
    border: none;
    border-radius: 20px;
    cursor: pointer;
    overflow: hidden;
    transition: all 0.3s ease;
    box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
}

.generate-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 15px 40px rgba(102, 126, 234, 0.6);
}

.generate-btn:active {
    transform: translateY(0);
}

.generate-btn::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 50%;
    transform: translate(-50%, -50%);
    transition: width 0.6s ease, height 0.6s ease;
}

.generate-btn:hover::before {
    width: 300px;
    height: 300px;
}

.btn-text {
    position: relative;
    z-index: 1;
}

/* Quota Info */
.quota-info {
    text-align: center;
    padding: 1rem;
    background: rgba(78, 222, 128, 0.1);
    border-radius: 12px;
    border: 1px solid rgba(78, 222, 128, 0.2);
}

.quota-text {
    font-size: 0.95rem;
    color: var(--success);
}

/* Loading Animation */
.loading-container {
    text-align: center;
    padding: 3rem 0;
}

.magic-book {
    width: 100px;
    height: 80px;
    margin: 0 auto 2rem;
    position: relative;
    perspective: 1000px;
}

.book-page {
    position: absolute;
    width: 50px;
    height: 80px;
    background: linear-gradient(90deg, var(--primary), var(--accent));
    border-radius: 5px;
    transform-origin: left center;
    animation: flip 2s ease-in-out infinite;
}

.book-page:nth-child(2) {
    animation-delay: 0.3s;
}

.book-page:nth-child(3) {
    animation-delay: 0.6s;
}

@keyframes flip {
    0%, 100% { transform: rotateY(0deg); }
    50% { transform: rotateY(-180deg); }
}

.loading-text {
    font-size: 1.25rem;
    color: var(--accent);
    margin-bottom: 1rem;
}

.progress-bar {
    width: 100%;
    height: 8px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 10px;
    overflow: hidden;
}

.progress-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--primary), var(--accent));
    border-radius: 10px;
    animation: progress 3s ease-in-out infinite;
}

@keyframes progress {
    0% { width: 0; }
    100% { width: 100%; }
}

/* Story Card */
.story-card {
    margin-top: 2rem;
}

.story-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
    padding-bottom: 1rem;
    border-bottom: 2px solid rgba(255, 255, 255, 0.1);
}

.story-title {
    font-size: 2rem;
    background: linear-gradient(45deg, var(--primary), var(--accent));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.close-btn {
    width: 40px;
    height: 40px;
    background: rgba(255, 255, 255, 0.1);
    border: none;
    border-radius: 50%;
    color: white;
    font-size: 1.5rem;
    cursor: pointer;
    transition: all 0.3s ease;
}

.close-btn:hover {
    background: var(--error);
    transform: rotate(90deg);
}

.story-content {
    line-height: 1.8;
    font-size: 1.1rem;
    color: var(--text-muted);
    margin-bottom: 2rem;
}

.story-content h3 {
    color: var(--accent);
    margin: 1.5rem 0 1rem;
}

.story-content p {
    margin-bottom: 1rem;
}

.story-content ul {
    list-style: none;
    padding-left: 1.5rem;
}

.story-content li {
    margin: 0.5rem 0;
    padding-left: 1.5rem;
    position: relative;
}

.story-content li::before {
    content: 'âœ¨';
    position: absolute;
    left: 0;
}

.story-actions {
    display: flex;
    gap: 1rem;
    flex-wrap: wrap;
}

.action-btn {
    flex: 1;
    min-width: 150px;
    padding: 1rem;
    font-size: 1rem;
    font-weight: 600;
    color: white;
    background: linear-gradient(135deg, var(--primary), var(--secondary));
    border: none;
    border-radius: 12px;
    cursor: pointer;
    transition: all 0.3s ease;
}

.action-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
}

/* Toast Notification */
.toast {
    position: fixed;
    bottom: 2rem;
    right: 2rem;
    padding: 1rem 1.5rem;
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
    border-radius: 12px;
    border: 1px solid rgba(255, 255, 255, 0.2);
    display: flex;
    align-items: center;
    gap: 0.75rem;
    transform: translateX(400px);
    transition: transform 0.3s ease;
    z-index: 1000;
}

.toast.show {
    transform: translateX(0);
}

.error-toast {
    border-color: var(--error);
    background: rgba(239, 68, 68, 0.1);
}

.toast-icon {
    font-size: 1.5rem;
}

.toast-message {
    font-size: 1rem;
    color: var(--text-light);
}

/* Animations */
@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

@keyframes fadeInDown {
    from {
        opacity: 0;
        transform: translateY(-30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Responsive Design */
@media (max-width: 768px) {
    .container {
        padding: 1rem;
    }
    
    .glass-effect {
        padding: 2rem 1.5rem;
    }
    
    .title-3d {
        font-size: 3rem;
    }
    
    .story-actions {
        flex-direction: column;
    }
    
    .action-btn {
        width: 100%;
    }
    
    .toast {
        bottom: 1rem;
        right: 1rem;
        left: 1rem;
    }
}
